RSpec.describe CKB::Types::Script do
  def always_success_json_object
    hash_bin = CKB::Blake2b.digest(
      Utils.hex_to_bin(
        "0x1400000000000e00100000000c000800000004000e0000000c00000014000000740100000000000000000600080004000600000004000000580100007f454c460201010000000000000000000200f3000100000078000100000000004000000000000000980000000000000005000000400038000100400003000200010000000500000000000000000000000000010000000000000001000000000082000000000000008200000000000000001000000000000001459308d00573000000002e7368737472746162002e74657874000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000b000000010000000600000000000000780001000000000078000000000000000a000000000000000000000000000000020000000000000000000000000000000100000003000000000000000000000000000000000000008200000000000000110000000000000000000000000000000100000000000000000000000000000000000000"
      )
    )
    always_success_cell_hash = Utils.bin_to_hex(hash_bin)
    {
      code_hash: always_success_cell_hash,
      args: []
    }
  end

  let(:always_success_type_hash) { "0x86f4f705a8e85905b1c73b84b1f3a3cf6dbfdd7eb8e47bfd1c489681ee2762cb" }

  it "to_hash" do
    expect(
      Utils.json_script_to_type_hash(always_success_json_object)
    ).to eq always_success_type_hash
  end
end
